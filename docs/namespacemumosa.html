<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mumosa: mumosa Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mumosa
   </div>
   <div id="projectbrief">Multi-modal analyses of single-cell data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mumosa Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Scale multi-modal embeddings to adjust for differences in variance.  
<a href="namespacemumosa.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmumosa_1_1Options.html">Options</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structmumosa_1_1Options.html" title="Options for compute_distance().">Options</a> for <code><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance()</a></code>.  <a href="structmumosa_1_1Options.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1dd47f25008fcc2d8c1249761a03b466" id="r_a1dd47f25008fcc2d8c1249761a03b466"><td class="memTemplParams" colspan="2">template&lt;typename Index_ , typename Float_ &gt; </td></tr>
<tr class="memitem:a1dd47f25008fcc2d8c1249761a03b466"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; Float_, Float_ &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance</a> (Index_ num_cells, Float_ *distances)</td></tr>
<tr class="separator:a1dd47f25008fcc2d8c1249761a03b466"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdd5bb9377ce3e6852eaae388921b89" id="r_a8bdd5bb9377ce3e6852eaae388921b89"><td class="memTemplParams" colspan="2">template&lt;typename Dim_ , typename Index_ , typename Float_ &gt; </td></tr>
<tr class="memitem:a8bdd5bb9377ce3e6852eaae388921b89"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; Float_, Float_ &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a8bdd5bb9377ce3e6852eaae388921b89">compute_distance</a> (const <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Prebuilt.html">knncolle::Prebuilt</a>&lt; Dim_, Index_, Float_ &gt; &amp;prebuilt, const <a class="el" href="structmumosa_1_1Options.html">Options</a> &amp;options)</td></tr>
<tr class="separator:a8bdd5bb9377ce3e6852eaae388921b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1759ae6e54125cf6286bb4db2f17eae4" id="r_a1759ae6e54125cf6286bb4db2f17eae4"><td class="memTemplParams" colspan="2">template&lt;typename Dim_ , typename Index_ , typename Float_ &gt; </td></tr>
<tr class="memitem:a1759ae6e54125cf6286bb4db2f17eae4"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; Float_, Float_ &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a1759ae6e54125cf6286bb4db2f17eae4">compute_distance</a> (Dim_ num_dim, Index_ num_cells, const Float_ *data, const <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Builder.html">knncolle::Builder</a>&lt; <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1SimpleMatrix.html">knncolle::SimpleMatrix</a>&lt; Dim_, Index_, Float_ &gt;, Float_ &gt; &amp;builder, const <a class="el" href="structmumosa_1_1Options.html">Options</a> &amp;options)</td></tr>
<tr class="separator:a1759ae6e54125cf6286bb4db2f17eae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a889cc7f4d99446e2a7dcd1d398763ace" id="r_a889cc7f4d99446e2a7dcd1d398763ace"><td class="memTemplParams" colspan="2">template&lt;typename Float_ &gt; </td></tr>
<tr class="memitem:a889cc7f4d99446e2a7dcd1d398763ace"><td class="memTemplItemLeft" align="right" valign="top">Float_&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale</a> (const std::pair&lt; Float_, Float_ &gt; &amp;ref, const std::pair&lt; Float_, Float_ &gt; &amp;target)</td></tr>
<tr class="separator:a889cc7f4d99446e2a7dcd1d398763ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9640853d15e0d836bfdf4d54a0874ac5" id="r_a9640853d15e0d836bfdf4d54a0874ac5"><td class="memTemplParams" colspan="2">template&lt;typename Float_ &gt; </td></tr>
<tr class="memitem:a9640853d15e0d836bfdf4d54a0874ac5"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; Float_ &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a9640853d15e0d836bfdf4d54a0874ac5">compute_scale</a> (const std::vector&lt; std::pair&lt; Float_, Float_ &gt; &gt; &amp;distances)</td></tr>
<tr class="separator:a9640853d15e0d836bfdf4d54a0874ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5abe395d9107cd90aa10bba4362f847c" id="r_a5abe395d9107cd90aa10bba4362f847c"><td class="memTemplParams" colspan="2">template&lt;typename Dim_ , typename Index_ , typename Input_ , typename Scale_ , typename Output_ &gt; </td></tr>
<tr class="memitem:a5abe395d9107cd90aa10bba4362f847c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacemumosa.html#a5abe395d9107cd90aa10bba4362f847c">combine_scaled_embeddings</a> (const std::vector&lt; Dim_ &gt; &amp;num_dims, Index_ num_cells, const std::vector&lt; Input_ * &gt; &amp;embeddings, const std::vector&lt; Scale_ &gt; &amp;scaling, Output_ *output)</td></tr>
<tr class="separator:a5abe395d9107cd90aa10bba4362f847c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Scale multi-modal embeddings to adjust for differences in variance. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1dd47f25008fcc2d8c1249761a03b466" name="a1dd47f25008fcc2d8c1249761a03b466"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dd47f25008fcc2d8c1249761a03b466">&#9670;&#160;</a></span>compute_distance() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Index_ , typename Float_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; Float_, Float_ &gt; mumosa::compute_distance </td>
          <td>(</td>
          <td class="paramtype">Index_&#160;</td>
          <td class="paramname"><em>num_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Float_ *&#160;</td>
          <td class="paramname"><em>distances</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Index_</td><td>Integer type for the number of cells. </td></tr>
    <tr><td class="paramname">Float_</td><td>Floating-point type for the distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">num_cells</td><td>Number of cells. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">distances</td><td>Pointer to an array containing the distances from each cell to its \(k\)-nearest neighbor. It is expected that the same \(k\) was used each cell. On output, the order of values may be altered.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair containing the median distance to the nearest neighbor (first) and the root-mean-squared distance across all cells (second). These values can be used in <code><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale()</a></code>. </dd></dl>

</div>
</div>
<a id="a8bdd5bb9377ce3e6852eaae388921b89" name="a8bdd5bb9377ce3e6852eaae388921b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdd5bb9377ce3e6852eaae388921b89">&#9670;&#160;</a></span>compute_distance() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_ , typename Index_ , typename Float_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; Float_, Float_ &gt; mumosa::compute_distance </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Prebuilt.html">knncolle::Prebuilt</a>&lt; Dim_, Index_, Float_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>prebuilt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmumosa_1_1Options.html">Options</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Dim_</td><td>Integer type for the number of dimensions. </td></tr>
    <tr><td class="paramname">Index_</td><td>Integer type for the number of cells. </td></tr>
    <tr><td class="paramname">Float_</td><td>Floating-point type for the data and distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prebuilt</td><td>A prebuilt neighbor search index for a modality-specifi embedding. </td></tr>
    <tr><td class="paramname">options</td><td>Further options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair containing the median distance to the <code><a class="el" href="structmumosa_1_1Options.html#a76621d12b7ed8b1c072ccf3598761640">Options::num_neighbors</a></code>-th nearest neighbor (first) and the root-mean-squared distance across all cells (second). These values can be used in <code><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale()</a></code>. </dd></dl>

</div>
</div>
<a id="a1759ae6e54125cf6286bb4db2f17eae4" name="a1759ae6e54125cf6286bb4db2f17eae4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1759ae6e54125cf6286bb4db2f17eae4">&#9670;&#160;</a></span>compute_distance() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_ , typename Index_ , typename Float_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; Float_, Float_ &gt; mumosa::compute_distance </td>
          <td>(</td>
          <td class="paramtype">Dim_&#160;</td>
          <td class="paramname"><em>num_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Index_&#160;</td>
          <td class="paramname"><em>num_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Float_ *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1Builder.html">knncolle::Builder</a>&lt; <a class="elRef" href="https://knncolle.github.io/knncolle/classknncolle_1_1SimpleMatrix.html">knncolle::SimpleMatrix</a>&lt; Dim_, Index_, Float_ &gt;, Float_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structmumosa_1_1Options.html">Options</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Dim_</td><td>Integer type for the number of dimensions. </td></tr>
    <tr><td class="paramname">Index_</td><td>Integer type for the number of cells. </td></tr>
    <tr><td class="paramname">Float_</td><td>Floating-point type for the data and distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">num_dim</td><td>Number of dimensions in the embedding. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">num_cells</td><td>Number of cells in the embedding. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to an array containing the embedding matrix for a modality. This should be stored in column-major layout where each row is a dimension and each column is a cell. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">builder</td><td>Algorithm to use for the neighbor search. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">options</td><td>Further options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair containing the median distance to the <code><a class="el" href="structmumosa_1_1Options.html#a76621d12b7ed8b1c072ccf3598761640">Options::num_neighbors</a></code>-th nearest neighbor (first) and the root-mean-squared distance across all cells (second). These values can be used in <code><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale()</a></code>. </dd></dl>

</div>
</div>
<a id="a889cc7f4d99446e2a7dcd1d398763ace" name="a889cc7f4d99446e2a7dcd1d398763ace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a889cc7f4d99446e2a7dcd1d398763ace">&#9670;&#160;</a></span>compute_scale() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Float_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Float_ mumosa::compute_scale </td>
          <td>(</td>
          <td class="paramtype">const std::pair&lt; Float_, Float_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::pair&lt; Float_, Float_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the scaling factor to be applied to an embedding of a "target" modality relative to a reference modality. This aims to scale the target so that the within-population variance is equal to that of the reference.</p>
<p>Advanced users may want to scale the target so that its variance is some \(S\)-fold of the reference, e.g., to give more weight to more important modalities. This can be achieved by multiplying the scaling factor by \(\sqrt{S}\).</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Float_</td><td>Floating-point type for the distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>Output of <code><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance()</a></code> for the embedding of the reference modality. The first value contains the median distance while the second value contains the root-mean squared distance (RMSD). </td></tr>
    <tr><td class="paramname">target</td><td>Output of <code><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance()</a></code> for the embedding of the target modality.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A scaling factor to apply to the embedding of the target modality, defined as the ratio of the median distances. If either of the median distances is zero, this function instead returns the ratio of the RMSDs. If the reference RMSD is zero, this function will return zero; if the target RMSD is zero, this function will return positive infinity. </dd></dl>

</div>
</div>
<a id="a9640853d15e0d836bfdf4d54a0874ac5" name="a9640853d15e0d836bfdf4d54a0874ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9640853d15e0d836bfdf4d54a0874ac5">&#9670;&#160;</a></span>compute_scale() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Float_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Float_ &gt; mumosa::compute_scale </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; Float_, Float_ &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>distances</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the scaling factors for a group of embeddings, given the neighbor distances computed by <code><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance()</a></code>. This aims to scale each embedding so that the within-population variances are equal across embeddings. The "reference" modality is defined as the first embedding with a non-zero RMSD; other than this requirement, the exact choice of reference has no actual impact on the relative values of the scaling factors.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Float_</td><td>Floating-point type for the distances.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distances</td><td>Vector of distances for embeddings, as computed by <code><a class="el" href="namespacemumosa.html#a1dd47f25008fcc2d8c1249761a03b466">compute_distance()</a></code> on each embedding.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of scaling factors of length equal to that of <code>distances</code>, to be applied to each embedding. This is equivalent to running <code><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale()</a></code> on each entry of <code>distances</code> against the chosen reference. </dd></dl>

</div>
</div>
<a id="a5abe395d9107cd90aa10bba4362f847c" name="a5abe395d9107cd90aa10bba4362f847c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5abe395d9107cd90aa10bba4362f847c">&#9670;&#160;</a></span>combine_scaled_embeddings()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Dim_ , typename Index_ , typename Input_ , typename Scale_ , typename Output_ &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void mumosa::combine_scaled_embeddings </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; Dim_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>num_dims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Index_&#160;</td>
          <td class="paramname"><em>num_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Input_ * &gt; &amp;&#160;</td>
          <td class="paramname"><em>embeddings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Scale_ &gt; &amp;&#160;</td>
          <td class="paramname"><em>scaling</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Output_ *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Combine multiple embeddings for different modalities into a single embedding matrix, possibly after scaling each embedding. This is done row-wise, i.e., the coordinates are concatenated across embeddings for each column.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Dim_</td><td>Integer type for the number of dimensions. </td></tr>
    <tr><td class="paramname">Index_</td><td>Integer type for the number of cells. </td></tr>
    <tr><td class="paramname">Input_</td><td>Floating-point type for the input data. </td></tr>
    <tr><td class="paramname">Scale_</td><td>Floating-point type for the scaling factor. </td></tr>
    <tr><td class="paramname">Output_</td><td>Floating-point type for the output data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">num_dims</td><td>Vector containing the number of dimensions in each embedding. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">num_cells</td><td>Number of cells in each embedding. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">embeddings</td><td>Vector of pointers of length equal to that of <code>num_dims</code>. Each pointer refers to an array containing an embedding matrix for a single modality, which should be in column-major format with dimensions in rows and cells in columns. The number of rows of the <code>i</code>-th matrix should be equal to <code>num_dims[i]</code> and the number of columns should be equal to <code>num_cells</code>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">scaling</td><td>Scaling to apply to each embedding, usually from <code><a class="el" href="namespacemumosa.html#a889cc7f4d99446e2a7dcd1d398763ace">compute_scale()</a></code>. This should be of length equal to that of <code>num_dims</code>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">output</td><td>Pointer to the output array. This should be of length equal to the product of <code>num_cells</code> and the sum of <code>num_dims</code>. On completion, <code>output</code> is filled with the combined embeddings in column-major format. Each row corresponds to a dimension while each column corresponds to a cell. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
